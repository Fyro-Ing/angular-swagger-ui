/*
 * Orange angular-swagger-ui - v0.1.5
 *
 * (C) 2015 Orange, all right reserved
 * MIT Licensed
 */
"use strict";angular.module("swaggerUi",["ng","swaggerUiTemplates"]).directive("swaggerUi",function(){return{restrict:"A",controller:"swaggerUiController",templateUrl:"templates/swagger-ui.html",scope:{url:"=",apiExplorer:"=",errorHandler:"=",apiExplorerTransform:"=",transformApiResponse:"="}}}).factory("Scopes",function(){var a={};return{store:function(b,c){a[b]=c},get:function(b){return a[b]}}}).controller("swaggerUiController",["$scope","$http","$sce","$location","$window","swaggerModel","swaggerClient","Scopes",function(a,b,c,d,e,f,g,h){function i(c,d){a.loading=!0;var e="function"==typeof a.errorHandler,f={},g={method:"GET",url:c,headers:f};"function"==typeof a.apiExplorerTransform&&a.apiExplorerTransform(g),"function"==typeof a.transformApiResponse&&(g.transformResponse=a.transformApiResponse),b(g).then(function(b){a.loading=!1,d(b)},function(b){a.loading=!1,e&&a.errorHandler(b.data,b.status)})}function j(a,b,c){var d,e,g,h,i,j,k,l=c.parameters||[],m=[].concat(l);for(d=0,h=b.length;d<h;d++){for(i=!1,j=f.resolveReference(a,b[d]),e=0,g=l.length;e<g;e++)if(k=f.resolveReference(a,l[e]),j.name===k.name&&j.in===k.in){i=!0;break}i||m.push(j)}return m}function k(){a.infos=l.info,a.infos.scheme=l.schemes&&l.schemes[0]||"http",a.infos.basePath=l.basePath,a.infos.host=l.host,a.infos.description=c.trustAsHtml(a.infos.description);var b,e,g=0,h=0,i={},k={},m=[],n=d.search().open;if(l.tags)for(var o=0,p=l.tags.length;o<p;o++){var q=l.tags[o];m.push(q),i[q.name]=o}else m.push({name:"default",open:!0}),i.default=0;for(var r in l.paths){b=l.paths[r],e=b.parameters||[],delete b.parameters;for(var s in b){var t=b[s];t.id=g,k[g]={contentType:t.consumes&&1===t.consumes.length?t.consumes[0]:"application/json",responseType:t.produces&&t.produces.length>0?t.produces.join(","):"application/json"},t.httpMethod=s,t.path=r;for(var u=0,v=t.parameters=j(l,e,t),w=v.length;u<w;u++){var x=v[u];x.id=h,x.type=f.getType(x),x.items&&x.items.enum&&(x.enum=x.items.enum,x.default=x.items.default),x.subtype=x.enum?"enum":x.type,k[g][x.name]=x.default||"",x.schema&&(x.schema.display=1,x.schema.json=f.generateSampleJson(l,x.schema,t.consumes),x.schema.model=c.trustAsHtml(f.generateModel(l,x.schema))),"body"===x.in&&(t.consumes=t.consumes||["application/json"]),h++}if(t.responses)for(var y in t.responses){var z=t.responses[y];z.description=c.trustAsHtml(z.description),z.schema?(z.schema.json=f.generateSampleJson(l,z.schema,t.produces),"object"===z.schema.type||"array"===z.schema.type||z.schema.$ref?(z.display=1,z.schema.model=c.trustAsHtml(f.generateModel(l,z.schema))):"string"===z.schema.type&&delete z.schema,t.hasResponses=!0):t.hasResponses=!0}t.tags=t.tags||["default"];var q=t.tags[0];void 0===i[q]&&(i[q]=m.length,m.push({name:q}));var A=m[i[t.tags[0]]];t.open=n===t.operationId||n===A.name+"*",A.operations=A.operations||[],A.operations.push(t),t.open&&(A.open=!0),g++}}for(var o=0;o<m.length;o++){var A=m[o],B=m[o].operations;A.open=A.open||n===A.name||n===A.name+"*",(!B||B&&0===B.length)&&m.splice(o,1)}m.sort(function(a,b){return a.name>b.name?1:a.name<b.name?-1:0}),f.clearCache(),a.form=k,a.resources=m}h.store("swaggerUiController",a);var l;a.$watch("url",function(b){if(a.infos={},a.resources=[],a.form={},b&&""!==b){var c="function"==typeof a.errorHandler;i(b,function(b){l=b.data,"2.0"===l.swagger?k():c&&a.errorHandler("unsupported swagger version","415")})}}),a.expand=function(a,b){a.open=!0;for(var c=0,d=a.operations,e=d.length;c<e;c++)d[c].open=b},a.permalink=function(a){d.search("open",a)},a.submitExplorer=function(b){b.loading=!0,g.send(l,b,a.form[b.id],a.apiExplorerTransform).then(function(a){if(b.loading=!1,b.explorerResult=a,a.response.body instanceof Blob){var c=a.response.body,d=URL.createObjectURL(c);e.open(d)}})}}]).directive("fileInput",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.bind("change",function(){a.$apply(function(){d.$setViewValue(b[0].files[0])})})}}}),angular.module("swaggerUi").service("swaggerClient",["$q","$http","$sce",function(a,b,c){function d(a,b){var c="",d=angular.extend({},b.config.headers,b.headers());if(b.config.params){var e=[];for(var f in b.config.params)if(Array.isArray(b.config.params[f]))for(var g in b.config.params[f])e.push(f+"="+encodeURIComponent(b.config.params[f][g]));else e.push(f+"="+encodeURIComponent(b.config.params[f]));e.length>0&&(c="?"+e.join("&"))}a.resolve({url:b.config.url+c,response:{body:angular.isDefined(b.data)?angular.isString(b.data)||b.data instanceof Blob?b.data:angular.toJson(b.data,!0):"no content",status:b.status,headers:angular.toJson(d,!0),contentType:b.headers("content-type")}})}function e(a){var b=new DataView(a);return new TextDecoder("utf-8").decode(b)}this.send=function(c,f,g,h){for(var i=a.defer(),j={},k={},l=f.path,m=0,n=f.parameters||[],o=n.length;m<o;m++){var p=n[m],q=g[p.name];switch(p.in){case"query":q&&(j[p.name]=q);break;case"path":l=l.replace("{"+p.name+"}",encodeURIComponent(q));break;case"header":q&&(k[p.name]=q);break;case"formData":q&&("file"===p.type?(g.body=g.body||new FormData,g.contentType=void 0,g.body.append(p.name,q)):(g.body=g.body||{},g.body[p.name]=q));break;case"body":g.body=q}}k.Accept=g.responseType,k["Content-Type"]=g.body?g.contentType:"text/plain";var r={method:f.httpMethod,url:[c.schemes&&c.schemes[0]||"http","://",c.host,c.basePath||"",l].join(""),headers:k,data:g.body,params:j},s=function(a){d(i,a)};return"function"==typeof h&&h(r),f.produces&&-1!==f.produces.indexOf("application/pdf")&&(r.responseType="arraybuffer",r.transformResponse=function(a,b){var c=a;return a&&"application/pdf"===b("content-type")?c=new Blob([a],{type:"application/pdf",name:"contract.pdf"}):a&&"TextDecoder"in window?c=e(a):a&&(c=String.fromCharCode.apply(null,new Uint8Array(a))),c}),b(r).then(s,s),i.promise}}]),angular.module("swaggerUi").service("swaggerModel",["$httpParamSerializerJQLike",function(a){function b(a){return a.$ref.replace("#/definitions/","")}function c(a,f){var h;if(f.default||f.example)h=f.default||f.example;else if(f.properties){h={};for(var i in f.properties)h[i]=c(a,f.properties[i])}else if(f.$ref){var j=a.definitions&&a.definitions[b(f)];j&&(e[f.$ref]||(e[f.$ref]=c(a,j)),h=e[f.$ref])}else if("array"===f.type)h=[c(a,f.items)];else if(f.hasOwnProperty("allOf")){h={};for(var k in f.allOf){var l=f.allOf[k];h=_.extend(h,c(a,l))}}else h="object"===f.type?{}:d(g(f));return h}function d(a){var b;switch(a){case"long":case"integer":b=0;break;case"boolean":b=!1;break;case"double":case"number":b=0;break;case"string":b="string";break;case"date":b=(new Date).toISOString().split("T")[0];break;case"date-time":b=(new Date).toISOString()}return b}var e={},f={},g=(this.resolveReference=function(a,b){if(b.$ref){var c=b.$ref.replace("#/","").split("/");b=a;for(var d=0,e=c.length;d<e;d++)b=b[c[d]]}return b},this.getType=function(a){var b=a.format;switch(b){case"int32":b=a.type;break;case"int64":b="long"}return b||a.type});this.generateSampleJson=function(a,b,d){var e=c(a,b);return angular.toJson(e,!0)};var h=0,i=this.generateProperties=function(a,c,d,e){for(var f in c.properties){var h=c.properties[f];d.push('<div class="pad"><strong>',f,'</strong> (<span class="type">'),h.properties?(d.push(f),e.push(j(a,h,f))):h.$ref?(d.push(b(h)),e.push(j(a,h))):"array"===h.type?(d.push("Array["),h.items.properties?(d.push(f),e.push(j(a,h,f))):h.items.$ref?(d.push(b(h.items)),e.push(j(a,h.items))):d.push(g(h.items)),d.push("]")):d.push(g(h)),d.push("</span>"),function(a,b){return a.required&&-1!==a.required.indexOf(b)}(c,f)||d.push(", ","<em>optional</em>"),d.push(")"),h.description&&d.push(": ",h.description),h.enum&&d.push(" = ",angular.toJson(h.enum).replace(/,/g," or ")),d.push(",</div>")}},j=this.generateModel=function(a,c,d){var e="";if(c.properties){d=d||"Inline Model"+h++;var k=["<div><strong>"+d+" {</strong>"],l=[];i(a,c,k,l),k.pop(),k.push("</div>"),k.push("<strong>}</strong>"),k.push(l.join(""),"</div>"),e=k.join("")}else if(c.$ref){var m=b(c),n=a.definitions&&a.definitions[m];n&&(f[c.$ref]||(f[c.$ref]=j(a,n,m)),e=f[c.$ref])}else if("array"===c.type){var k=["<strong>Array ["],o="";if(c.items.properties){var p="Inline Model"+h++;k.push(p),o=j(a,c.items,p)}else c.items.$ref?(k.push(b(c.items)),o=j(a,c.items)):k.push(g(c.items));k.push("]</strong><br><br>",o),e=k.join("")}else if("object"===c.type)e="<strong>Inline Model {<br>}</strong>";else if(c.allOf){d=d||"Inline Model"+h++;var k=["<div><strong>"+d+" {</strong>"],l=[];k.push('<div class="pad"><strong>### allOf</strong> [');for(var q in c.allOf){var r=c.allOf[q],o=j(a,r,r.description);k.push(o)}k.push(",</div>"),k.pop(),k.push("</div>"),k.push("<strong>}</strong>"),k.push(l.join(""),"</div>"),e=k.join("")}else if(c.enum){var k=["<div><strong>"+d+'</strong>(<span class="type">'+c.type+"</span>) <strong>{</strong>"];k.push('<div class="pad">'),k.push(c.description+" = "),k.push(angular.toJson(c.enum).replace(/,/g," or ")),k.push("</div>"),k.push("<strong>}</strong></div>"),e=k.join("")}return e};this.clearCache=function(){e={},f={}}}]),angular.module("swaggerUiTemplates",["templates/swagger-ui.html"]),angular.module("templates/swagger-ui.html",[]).run(["$templateCache",function(a){a.put("templates/swagger-ui.html",'<div class="swagger-ui" aria-live="polite" aria-relevant="additions removals"> <h3 class="swagger-loading" ng-if="loading">loading ...</h3> <div class="api-name"> <h3 ng-bind="infos.title"></h3> </div> <div class="api-description" ng-bind-html="infos.description"></div> <div class="api-infos"> <div class="api-infos-contact" ng-if="infos.contact"> <div ng-if="infos.contact.name" class="api-infos-contact-name">created by <span ng-bind="infos.contact.name"></span></div> <div ng-if="infos.contact.url" class="api-infos-contact-url">see more at <a href="{{infos.contact.url}}" ng-bind="infos.contact.url"></a></div> <a ng-if="infos.contact.email" class="api-infos-contact-url" href="mailto:{{infos.contact.email}}?subject={{infos.title}}">contact the developer</a> </div> <div class="api-infos-license" ng-if="infos.license"> <span>license: </span><a href="{{infos.license.url}}" ng-bind="infos.license.name"></a> </div> </div> <ul class="list-unstyled endpoints"> <li ng-repeat="api in resources" class="endpoint" ng-class="{active:api.open, hidden:api.show !== undefined && !api.show}"> <div class="clearfix"> <ul class="list-inline pull-left endpoint-heading"> <li> <h4> <a href="javascript:;" ng-click="api.open=!api.open;permalink(api.open?api.name:null)" ng-bind="api.name"></a> <span ng-if="api.description"> : <span ng-bind="api.description"></span></span> </h4> </li> </ul> <ul class="list-inline pull-right endpoint-actions"> <li> <a href="javascript:;" ng-click="api.open=!api.open;permalink(api.open?api.name:null)">open/hide</a> </li> <li> <a href="javascript:;" ng-click="expand(api);permalink(api.name)">list operations</a> </li> <li> <a href="javascript:;" ng-click="expand(api,true);permalink(api.name+\'*\')">expand operations</a> </li> </ul> </div> <ul class="list-unstyled collapse operations" ng-class="{in:api.open}"> <li ng-repeat="op in api.operations" class="operation {{op.httpMethod}}"> <div class="heading"> <a ng-click="op.open=!op.open;permalink(op.open?op.operationId:null)" href="javascript:;"> <div class="clearfix"> <span class="http-method text-uppercase" ng-bind="op.httpMethod"></span> <span class="path" ng-bind="op.path"></span> <span class="description pull-right" ng-bind="op.summary"></span> </div> </a> </div> <div class="content collapse" ng-class="{in:op.open}"> <div ng-if="op.description"> <h5>implementation notes</h5> <p ng-bind="op.description"></p> </div> <form role="form" name="explorerForm" ng-submit="explorerForm.$valid&&submitExplorer(op)"> <div ng-if="op.responseClass" class="response"> <h5>response class (status {{op.responseClass.status}})</h5> <div ng-if="op.responseClass.display!==-1"> <ul class="list-inline schema"> <li><a href="javascript:;" ng-click="op.responseClass.display=0" ng-class="{active:op.responseClass.display===0}">model</a></li> <li><a href="javascript:;" ng-click="op.responseClass.display=1" ng-class="{active:op.responseClass.display===1}">model schema</a></li> </ul> <pre class="model" ng-if="op.responseClass.display===0" ng-bind-html="op.responseClass.schema.model"></pre> <pre class="model-schema" ng-if="op.responseClass.display===1" ng-bind="op.responseClass.schema.json"></pre> </div> <div ng-if="op.produces" class="content-type"> <label for="responseContentType{{op.id}}">response content type</label> <select ng-model="form[op.id].responseType" ng-options="item for item in op.produces track by item" id="responseContentType{{op.id}}" name="responseContentType{{op.id}}" required></select> </div> </div> <div ng-if="op.parameters&&op.parameters.length>0" class="table-responsive"> <h5>parameters</h5> <table class="table table-condensed parameters"> <thead> <tr> <th class="name">parameter</th> <th class="value">value</th> <th class="desc">description</th> <th class="type">parameter type</th> <th class="data">data type</th> </tr> </thead> <tbody> <tr ng-repeat="param in op.parameters"> <td ng-class="{bold:param.required}"> <label for="param{{param.id}}" ng-bind="param.name"></label> </td> <td ng-class="{bold:param.required}"> <div ng-if="apiExplorer"> <div ng-if="param.in!==\'body\'" ng-switch="param.subtype"> <input ng-switch-when="file" type="file" file-input ng-model="form[op.id][param.name]" id="param{{param.id}}" placeholder="{{param.required?\'(required)\':\'\'}}" ng-required="param.required"> <select multiple ng-switch-when="enum" ng-model="form[op.id][param.name]" id="param{{param.id}}"> <option ng-repeat="value in param.enum" value="{{value}}" ng-bind="value+(param.default===value?\' (default)\':\'\')" ng-selected="param.default===value"></option> </select> <input ng-switch-default type="text" ng-model="form[op.id][param.name]" id="param{{param.id}}" placeholder="{{param.required?\'(required)\':\'\'}}" ng-required="param.required"> </div> <div ng-if="param.in===\'body\'"> <textarea id="param{{param.id}}" ng-model="form[op.id][param.name]" ng-required="param.required"></textarea> <br> <div ng-if="op.consumes" class="content-type"> <label for="bodyContentType{{op.id}}">parameter content type</label> <select ng-model="form[op.id].contentType" id="bodyContentType{{op.id}}" name="bodyContentType{{op.id}}" ng-options="item for item in op.consumes track by item"></select> </div> </div> </div> <div ng-if="!apiExplorer"> <div ng-if="param.in!==\'body\'"> <div ng-if="param.default"><span ng-bind="param.default"></span> (default)</div> <div ng-if="param.enum"> <span ng-repeat="value in param.enum">{{value}}<span ng-if="!$last"> or </span></span> </div> <div ng-if="param.required"><strong>(required)</strong></div> </div> </div> </td> <td ng-class="{bold:param.required}" ng-bind="param.description"></td> <td ng-bind="param.in"></td> <td ng-if="param.type" ng-switch="param.type"> <span ng-switch-when="array" ng-bind="\'Array[\'+param.items.type+\']\'"></span> <span ng-switch-default ng-bind="param.type"></span> </td> <td ng-if="param.schema"> <ul class="list-inline schema"> <li><a href="javascript:;" ng-click="param.schema.display=0" ng-class="{active:param.schema.display===0}">model</a></li> <li><a href="javascript:;" ng-click="param.schema.display=1" ng-class="{active:param.schema.display===1}">model schema</a></li> </ul> <pre class="model" ng-if="param.schema.display===0&&param.schema.model" ng-bind-html="param.schema.model"></pre> <div class="model-schema" ng-if="param.schema.display===1&&param.schema.json"> <pre ng-bind="param.schema.json" ng-click="form[op.id][param.name]=param.schema.json" aria-described-by="help-{{param.id}}"></pre> <div id="help-{{param.id}}">click to set as parameter value</div> </div> </td> </tr> </tbody> </table> </div> <div class="table-responsive" ng-if="op.hasResponses"> <h5>response messages</h5> <table class="table responses"> <thead> <tr> <th class="code">HTTP status code</th> <th>reason</th> <th>response model</th> </tr> </thead> <tbody> <tr ng-repeat="(code, resp) in op.responses"> <td ng-bind="code"></td> <td ng-bind-html="resp.description"></td> <td> <ul ng-if="resp.schema&&resp.schema.model&&resp.schema.json" class="list-inline schema"> <li><a href="javascript:;" ng-click="resp.display=0" ng-class="{active:resp.display===0}">model</a></li> <li><a href="javascript:;" ng-click="resp.display=1" ng-class="{active:resp.display===1}">model schema</a></li> </ul> <pre class="model" ng-if="resp.display===0&&resp.schema&&resp.schema.model" ng-bind-html="resp.schema.model"></pre> <pre class="model-schema" ng-if="resp.display===1&&resp.schema&&resp.schema.json" ng-bind="resp.schema.json"></pre> </td> </tr> </tbody> </table> </div> <div ng-if="apiExplorer"> <button class="btn btn-default" ng-click="op.explorerResult=false;op.hideExplorerResult=false" type="submit" ng-disabled="op.loading" ng-bind="op.loading?\'loading...\':\'try it out!\'"></button> <a class="hide-try-it" ng-if="op.explorerResult&&!op.hideExplorerResult" ng-click="op.hideExplorerResult=true" href="javascript:;">hide response</a> </div> </form> <div ng-if="op.explorerResult" ng-show="!op.hideExplorerResult"> <h5>request URL</h5> <pre ng-bind="op.explorerResult.url"></pre> <h5>response body</h5> <pre ng-show="op.explorerResult.response.contentType !== \'text/html\'" ng-bind="op.explorerResult.response.body"></pre> <pre ng-show="op.explorerResult.response.contentType === \'text/html\'" ng-bind-html="op.explorerResult.response.body"></pre> <h5>response code</h5> <pre ng-bind="op.explorerResult.response.status"></pre> <h5>response headers</h5> <pre ng-bind="op.explorerResult.response.headers"></pre> </div> </div> </li> </ul> </li> </ul> <div class="api-version" ng-if="infos"> [BASE URL: <span class="h4" ng-bind="infos.basePath"></span>, API VERSION: <span class="h4" ng-bind="infos.version"></span>, HOST: <span class="h4" ng-bind="infos.scheme"></span>://<span class="h4" ng-bind="infos.host"></span>] </div> </div> ')}]);